{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Modal,Button,Alert,Row,Col}from\"react-bootstrap\";import axios from\"axios\";import Cookies from\"js-cookie\";import styles from\"../styles/Profile.module.css\";import loadingSpinner from\"../assets/loading.gif\";// Updated to use the smaller loading spinner\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[userProfile,setUserProfile]=useState(null);const[displayName,setDisplayName]=useState(\"\");const[bio,setBio]=useState(\"\");const[profilePicture,setProfilePicture]=useState(\"\");const[tempProfilePicture,setTempProfilePicture]=useState(\"\");// Temporary profile picture for the modal\nconst[location,setLocation]=useState(\"\");// New state for location\nconst[isEditing,setIsEditing]=useState(false);const[isLoading,setIsLoading]=useState(true);const[showSuccessMessage,setShowSuccessMessage]=useState(false);const[errors,setErrors]=useState({});useEffect(()=>{const fetchUserProfile=async()=>{try{const userResponse=await axios.get(\"/dj-rest-auth/user/\",{headers:{Authorization:`Token ${localStorage.getItem('token')}`}});const userId=userResponse.data.pk;const response=await axios.get(`/userprofiles/${userId}/`,{headers:{Authorization:`Token ${localStorage.getItem('token')}`}});const data=response.data;setUserProfile(data);setDisplayName(data.display_name||\"No display name yet\");setBio(data.bio||\"No bio has been given yet\");setLocation(data.location||\"Not decided yet\");// Initialize location\nsetProfilePicture(data.profile_picture||\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\");setTempProfilePicture(data.profile_picture||\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\");// Initialize tempProfilePicture with current picture\nsetIsLoading(false);}catch(error){console.error(\"Failed to fetch user profile:\",error);setErrors({non_field_errors:[\"Failed to load profile data.\"]});setIsLoading(false);}};fetchUserProfile();},[]);const handleImageChange=event=>{const file=event.target.files[0];if(file){// Update temporary profile picture\nsetTempProfilePicture(URL.createObjectURL(file));}};const handleSaveProfile=async()=>{const updatedProfile={display_name:displayName===\"No display name yet\"?\"\":displayName,bio:bio===\"No bio has been given yet\"?\"\":bio,location:location===\"Not decided yet\"?\"\":location// Include location in the updated profile\n};setIsLoading(true);try{const formData=new FormData();formData.append(\"display_name\",updatedProfile.display_name);formData.append(\"bio\",updatedProfile.bio);formData.append(\"location\",updatedProfile.location);// Add location to FormData\nif(tempProfilePicture&&tempProfilePicture.startsWith('blob:')){// Convert data URL to Blob and upload\nconst response=await fetch(tempProfilePicture);const blob=await response.blob();formData.append(\"profile_picture\",blob,\"profile_picture.jpg\");}else if(tempProfilePicture!==profilePicture){// Handle URL-based profile picture logic if necessary\n}const csrfToken=Cookies.get('csrftoken');// Adjust this if your token is stored differently\nconst response=await axios.patch(`/userprofiles/${userProfile.id}/`,formData,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:`Token ${localStorage.getItem('token')}`,'X-CSRFToken':csrfToken// Include CSRF token\n}});// Update local state after successful upload\nsetProfilePicture(response.data.profile_picture);// Update profile picture with the URL returned by the server\nsetShowSuccessMessage(true);setTimeout(()=>setShowSuccessMessage(false),3000);setIsEditing(false);}catch(error){var _error$response;console.error(\"Error updating profile:\",error);setErrors(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||{non_field_errors:[\"Failed to update profile.\"]});}finally{setIsLoading(false);}};const handleCancelEdit=()=>{// Revoke the temporary object URL to avoid memory leaks\nif(tempProfilePicture&&tempProfilePicture.startsWith(\"blob:\")){URL.revokeObjectURL(tempProfilePicture);}setTempProfilePicture(profilePicture);// Reset the temporary profile picture on cancel\nsetIsEditing(false);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(255, 255, 255, 0.8)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999},children:/*#__PURE__*/_jsx(\"img\",{src:loadingSpinner,alt:\"Loading...\",style:{width:'75px',height:'75px'}})});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.profileCard,children:[showSuccessMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",style:{position:'fixed',top:'100px',// Distance from the top of the page\nright:'20px',// Distance from the right side of the page\nzIndex:1000,width:'250px',// Smaller width\ntextAlign:'center',padding:'10px'// Smaller padding\n},children:\"Profile saved successfully!\"}),/*#__PURE__*/_jsx(\"img\",{src:profilePicture,alt:\"Profile\",className:styles.profileImage}),/*#__PURE__*/_jsxs(\"div\",{className:styles.profileDetails,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.profileName,children:displayName}),/*#__PURE__*/_jsx(\"p\",{className:styles.profileBio,children:bio}),/*#__PURE__*/_jsxs(\"p\",{className:styles.profileLocation,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",style:{color:'green',verticalAlign:'middle'},children:\"where_to_vote\"}),\"My dream house-location is: \",location]}),/*#__PURE__*/_jsxs(Button,{variant:\"dark\",onClick:()=>setIsEditing(true),style:{marginTop:'10px'},children:[\" \",\"Edit Profile\"]})]}),/*#__PURE__*/_jsxs(Modal,{show:isEditing,onHide:handleCancelEdit,size:\"lg\"// Make the modal larger\n,\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Profile\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profilePicture\",children:\"Profile Picture\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"profilePicture\",accept:\"image/*\",onChange:handleImageChange,className:\"form-control\"}),/*#__PURE__*/_jsx(\"img\",{src:tempProfilePicture,alt:\"Profile Preview\",className:\"mt-3 img-fluid rounded-circle\"// Make the image preview round\n,style:{width:'150px',height:'150px',objectFit:'cover'}})]})}),/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"displayName\",children:\"Display Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"displayName\",className:\"form-control\",value:displayName,onChange:e=>setDisplayName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"bio\",className:\"form-control\",value:bio,onChange:e=>setBio(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"location\",className:\"form-control\",value:location===\"Not decided yet\"?\"\":location// If location is \"Not decided yet\", show an empty input\n,onChange:e=>setLocation(e.target.value||\"Not decided yet\")// Update location state\n})]})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCancelEdit,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSaveProfile,children:\"Save Changes\"})]})]})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Alert","Row","Col","axios","Cookies","styles","loadingSpinner","jsx","_jsx","jsxs","_jsxs","Profile","userProfile","setUserProfile","displayName","setDisplayName","bio","setBio","profilePicture","setProfilePicture","tempProfilePicture","setTempProfilePicture","location","setLocation","isEditing","setIsEditing","isLoading","setIsLoading","showSuccessMessage","setShowSuccessMessage","errors","setErrors","fetchUserProfile","userResponse","get","headers","Authorization","localStorage","getItem","userId","data","pk","response","display_name","profile_picture","error","console","non_field_errors","handleImageChange","event","file","target","files","URL","createObjectURL","handleSaveProfile","updatedProfile","formData","FormData","append","startsWith","fetch","blob","csrfToken","patch","id","setTimeout","_error$response","handleCancelEdit","revokeObjectURL","style","position","top","left","width","height","backgroundColor","display","justifyContent","alignItems","zIndex","children","src","alt","className","profileCard","variant","right","textAlign","padding","profileImage","profileDetails","profileName","profileBio","profileLocation","color","verticalAlign","onClick","marginTop","show","onHide","size","centered","Header","closeButton","Title","Body","md","htmlFor","type","accept","onChange","objectFit","value","e","Footer"],"sources":["C:/Users/marko/Desktop/VS CODE/django-rest-api/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Modal, Button, Alert, Row, Col } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport styles from \"../styles/Profile.module.css\";\r\nimport loadingSpinner from \"../assets/loading.gif\"; // Updated to use the smaller loading spinner\r\n\r\nfunction Profile() {\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [bio, setBio] = useState(\"\");\r\n  const [profilePicture, setProfilePicture] = useState(\"\");\r\n  const [tempProfilePicture, setTempProfilePicture] = useState(\"\"); // Temporary profile picture for the modal\r\n  const [location, setLocation] = useState(\"\"); // New state for location\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        const userResponse = await axios.get(\"/dj-rest-auth/user/\", {\r\n          headers: {\r\n            Authorization: `Token ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n\r\n        const userId = userResponse.data.pk;\r\n\r\n        const response = await axios.get(`/userprofiles/${userId}/`, {\r\n          headers: {\r\n            Authorization: `Token ${localStorage.getItem('token')}`,\r\n          },\r\n        });\r\n\r\n        const data = response.data;\r\n        setUserProfile(data);\r\n        setDisplayName(data.display_name || \"No display name yet\");\r\n        setBio(data.bio || \"No bio has been given yet\");\r\n        setLocation(data.location || \"Not decided yet\"); // Initialize location\r\n        setProfilePicture(data.profile_picture || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\");\r\n        setTempProfilePicture(data.profile_picture || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\"); // Initialize tempProfilePicture with current picture\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch user profile:\", error);\r\n        setErrors({ non_field_errors: [\"Failed to load profile data.\"] });\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, []);\r\n\r\n  const handleImageChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Update temporary profile picture\r\n      setTempProfilePicture(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    const updatedProfile = {\r\n      display_name: displayName === \"No display name yet\" ? \"\" : displayName,\r\n      bio: bio === \"No bio has been given yet\" ? \"\" : bio,\r\n      location: location === \"Not decided yet\" ? \"\" : location, // Include location in the updated profile\r\n    };\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"display_name\", updatedProfile.display_name);\r\n      formData.append(\"bio\", updatedProfile.bio);\r\n      formData.append(\"location\", updatedProfile.location); // Add location to FormData\r\n\r\n      if (tempProfilePicture && tempProfilePicture.startsWith('blob:')) {\r\n        // Convert data URL to Blob and upload\r\n        const response = await fetch(tempProfilePicture);\r\n        const blob = await response.blob();\r\n        formData.append(\"profile_picture\", blob, \"profile_picture.jpg\");\r\n      } else if (tempProfilePicture !== profilePicture) {\r\n        // Handle URL-based profile picture logic if necessary\r\n      }\r\n\r\n      const csrfToken = Cookies.get('csrftoken'); // Adjust this if your token is stored differently\r\n\r\n      const response = await axios.patch(`/userprofiles/${userProfile.id}/`, formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          Authorization: `Token ${localStorage.getItem('token')}`,\r\n          'X-CSRFToken': csrfToken, // Include CSRF token\r\n        },\r\n      });\r\n\r\n      // Update local state after successful upload\r\n      setProfilePicture(response.data.profile_picture); // Update profile picture with the URL returned by the server\r\n      setShowSuccessMessage(true);\r\n      setTimeout(() => setShowSuccessMessage(false), 3000);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error(\"Error updating profile:\", error);\r\n      setErrors(error.response?.data || { non_field_errors: [\"Failed to update profile.\"] });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    // Revoke the temporary object URL to avoid memory leaks\r\n    if (tempProfilePicture && tempProfilePicture.startsWith(\"blob:\")) {\r\n      URL.revokeObjectURL(tempProfilePicture);\r\n    }\r\n    setTempProfilePicture(profilePicture); // Reset the temporary profile picture on cancel\r\n    setIsEditing(false);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 9999,\r\n      }}>\r\n        <img src={loadingSpinner} alt=\"Loading...\" style={{ width: '75px', height: '75px' }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.profileCard}>\r\n      {showSuccessMessage && (\r\n        <Alert variant=\"success\" style={{\r\n          position: 'fixed',\r\n          top: '100px',  // Distance from the top of the page\r\n          right: '20px',  // Distance from the right side of the page\r\n          zIndex: 1000,\r\n          width: '250px',  // Smaller width\r\n          textAlign: 'center',\r\n          padding: '10px',  // Smaller padding\r\n        }}>\r\n          Profile saved successfully!\r\n        </Alert>\r\n      )}\r\n\r\n      <img\r\n        src={profilePicture}\r\n        alt=\"Profile\"\r\n        className={styles.profileImage}\r\n      />\r\n      <div className={styles.profileDetails}>\r\n        <h1 className={styles.profileName}>\r\n          {displayName}\r\n        </h1>\r\n        <p className={styles.profileBio}>\r\n          {bio}\r\n        </p>\r\n        <p className={styles.profileLocation}>\r\n          <span className=\"material-symbols-outlined\" style={{ color: 'green', verticalAlign: 'middle' }}>\r\n            where_to_vote\r\n          </span>\r\n          My dream house-location is: {location}\r\n        </p>\r\n        <Button variant=\"dark\" onClick={() => setIsEditing(true)} style={{ marginTop: '10px' }}> {/* Margin added here */}\r\n          Edit Profile\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Modal for Editing Profile */}\r\n      <Modal\r\n        show={isEditing}\r\n        onHide={handleCancelEdit}\r\n        size=\"lg\" // Make the modal larger\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Profile</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Row>\r\n            <Col md={4}>\r\n              <div>\r\n                <label htmlFor=\"profilePicture\">Profile Picture</label>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"profilePicture\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageChange}\r\n                  className=\"form-control\"\r\n                />\r\n                <img\r\n                  src={tempProfilePicture}\r\n                  alt=\"Profile Preview\"\r\n                  className=\"mt-3 img-fluid rounded-circle\" // Make the image preview round\r\n                  style={{ width: '150px', height: '150px', objectFit: 'cover' }}\r\n                />\r\n              </div>\r\n            </Col>\r\n            <Col md={8}>\r\n              <div>\r\n                <label htmlFor=\"displayName\">Display Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"displayName\"\r\n                  className=\"form-control\"\r\n                  value={displayName}\r\n                  onChange={(e) => setDisplayName(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"mt-3\">\r\n                <label htmlFor=\"bio\">Bio</label>\r\n                <textarea\r\n                  id=\"bio\"\r\n                  className=\"form-control\"\r\n                  value={bio}\r\n                  onChange={(e) => setBio(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"mt-3\">\r\n                <label htmlFor=\"location\">Location</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"location\"\r\n                  className=\"form-control\"\r\n                  value={location === \"Not decided yet\" ? \"\" : location} // If location is \"Not decided yet\", show an empty input\r\n                  onChange={(e) => setLocation(e.target.value || \"Not decided yet\")} // Update location state\r\n                />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleCancelEdit}>\r\n            Cancel\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleSaveProfile}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}