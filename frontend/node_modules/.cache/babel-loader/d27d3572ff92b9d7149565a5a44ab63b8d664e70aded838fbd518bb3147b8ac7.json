{"ast":null,"code":"import React,{useState}from\"react\";import Container from\"react-bootstrap/Container\";import Nav from\"react-bootstrap/Nav\";import Navbar from\"react-bootstrap/Navbar\";import logo2 from\"../assets/logo2.png\";import styles from\"../styles/NavigationBar.module.css\";import{NavLink,useNavigate}from\"react-router-dom\";import{useCurrentUser,useSetCurrentUser}from'../context/CurrentUserContext';import axios from'axios';// Function to get CSRF token from cookies\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const getCSRFToken=()=>{var _document$cookie$spli;const csrfToken=(_document$cookie$spli=document.cookie.split('; ').find(row=>row.startsWith('csrftoken=')))===null||_document$cookie$spli===void 0?void 0:_document$cookie$spli.split('=')[1];return csrfToken;};function NavigationBar(_ref){let{isAuthenticated}=_ref;// Access current user context and define state for navbar expansion\nconst currentUser=useCurrentUser();const setCurrentUser=useSetCurrentUser();const[expanded,setExpanded]=useState(false);const navigate=useNavigate();// Handle user logout by clearing session and navigating to home page\nconst handleLogout=async()=>{try{const csrfToken=getCSRFToken();if(!csrfToken){console.error(\"CSRF token not found.\");return;}await axios.post('/dj-rest-auth/logout/',{},{headers:{'X-CSRFToken':csrfToken,'Content-Type':'application/json'},withCredentials:true// Ensure credentials are sent with the request\n});// Clear local storage, session storage, and cookies\nlocalStorage.clear();sessionStorage.clear();document.cookie.split(\";\").forEach(c=>{document.cookie=c.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\");});// Reset the current user context and navigate to the home page\nsetCurrentUser(null);navigate(\"/home\");}catch(err){console.error('Error during logout:',err);}};// Handle navigation link click and collapse navbar\nconst handleNavClick=path=>{setExpanded(false);navigate(path);};// Main content of the component\nreturn/*#__PURE__*/_jsx(Navbar,{expand:\"lg\",className:styles.NavigationBar,fixed:\"top\",expanded:expanded,children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{className:styles.NavbarBrand,children:/*#__PURE__*/_jsxs(NavLink,{to:\"/\",onClick:()=>setExpanded(false),className:styles.BrandLink,children:[/*#__PURE__*/_jsx(\"img\",{src:logo2,alt:\"logo\",height:50,className:styles.BrandLogo}),/*#__PURE__*/_jsx(\"span\",{className:styles.BrandText,children:\"HOUSEGRAM\"})]})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\",onClick:()=>setExpanded(expanded?false:\"expanded\")}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsx(Nav,{className:\"ms-auto\",children:isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavLink,{to:\"/home\",className:styles.NavLink,onClick:()=>handleNavClick(\"/home\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"home\"}),\" Home\"]}),/*#__PURE__*/_jsxs(NavLink,{to:\"/upload\",className:styles.NavLink,onClick:()=>handleNavClick(\"/upload\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"add_photo_alternate\"}),\" Upload\"]}),/*#__PURE__*/_jsxs(NavLink,{to:\"/profile\",className:styles.NavLink,onClick:()=>handleNavClick(\"/profile\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"account_box\"}),\" Profile\"]}),/*#__PURE__*/_jsxs(NavLink,{to:\"#\",onClick:handleLogout,className:styles.NavLink,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"logout\"}),\" Logout\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavLink,{to:\"/login\",className:styles.NavLink,onClick:()=>handleNavClick(\"/login\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"key\"}),\" Login\"]}),/*#__PURE__*/_jsxs(NavLink,{to:\"/create-account\",className:styles.NavLink,onClick:()=>handleNavClick(\"/create-account\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"person_add\"}),\" Create Account\"]})]})})})]})});}export default NavigationBar;","map":{"version":3,"names":["React","useState","Container","Nav","Navbar","logo2","styles","NavLink","useNavigate","useCurrentUser","useSetCurrentUser","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getCSRFToken","_document$cookie$spli","csrfToken","document","cookie","split","find","row","startsWith","NavigationBar","_ref","isAuthenticated","currentUser","setCurrentUser","expanded","setExpanded","navigate","handleLogout","console","error","post","headers","withCredentials","localStorage","clear","sessionStorage","forEach","c","replace","err","handleNavClick","path","expand","className","fixed","children","Brand","NavbarBrand","to","onClick","BrandLink","src","alt","height","BrandLogo","BrandText","Toggle","Collapse","id"],"sources":["C:/Users/marko/Desktop/VS CODE/django-rest-api/frontend/src/components/NavigationBar.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport logo2 from \"../assets/logo2.png\";\r\nimport styles from \"../styles/NavigationBar.module.css\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport { useCurrentUser, useSetCurrentUser } from '../context/CurrentUserContext';\r\nimport axios from 'axios';\r\n\r\n// Function to get CSRF token from cookies\r\nconst getCSRFToken = () => {\r\n  const csrfToken = document.cookie\r\n    .split('; ')\r\n    .find(row => row.startsWith('csrftoken='))\r\n    ?.split('=')[1];\r\n  return csrfToken;\r\n};\r\n\r\nfunction NavigationBar({ isAuthenticated }) {\r\n  // Access current user context and define state for navbar expansion\r\n  const currentUser = useCurrentUser();\r\n  const setCurrentUser = useSetCurrentUser();\r\n  const [expanded, setExpanded] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Handle user logout by clearing session and navigating to home page\r\n  const handleLogout = async () => {\r\n    try {\r\n      const csrfToken = getCSRFToken();\r\n\r\n      if (!csrfToken) {\r\n        console.error(\"CSRF token not found.\");\r\n        return;\r\n      }\r\n\r\n      await axios.post('/dj-rest-auth/logout/', {}, {\r\n        headers: {\r\n          'X-CSRFToken': csrfToken,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        withCredentials: true,  // Ensure credentials are sent with the request\r\n      });\r\n\r\n      // Clear local storage, session storage, and cookies\r\n      localStorage.clear();\r\n      sessionStorage.clear();\r\n      document.cookie.split(\";\").forEach((c) => {\r\n        document.cookie = c\r\n          .replace(/^ +/, \"\")\r\n          .replace(/=.*/, \"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/\");\r\n      });\r\n\r\n      // Reset the current user context and navigate to the home page\r\n      setCurrentUser(null);\r\n      navigate(\"/home\");\r\n    } catch (err) {\r\n      console.error('Error during logout:', err);\r\n    }\r\n  };\r\n\r\n  // Handle navigation link click and collapse navbar\r\n  const handleNavClick = (path) => {\r\n    setExpanded(false);\r\n    navigate(path);\r\n  };\r\n\r\n  // Main content of the component\r\n  return (\r\n    <Navbar expand=\"lg\" className={styles.NavigationBar} fixed=\"top\" expanded={expanded}>\r\n      <Container>\r\n        {/* Brand logo and name, navigate to home when clicked */}\r\n        <Navbar.Brand className={styles.NavbarBrand}>\r\n          <NavLink to=\"/\" onClick={() => setExpanded(false)} className={styles.BrandLink}>\r\n            <img src={logo2} alt=\"logo\" height={50} className={styles.BrandLogo} />\r\n            <span className={styles.BrandText}>HOUSEGRAM</span>\r\n          </NavLink>\r\n        </Navbar.Brand>\r\n\r\n        {/* Toggle button for collapsing the navbar on smaller screens */}\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" onClick={() => setExpanded(expanded ? false : \"expanded\")} />\r\n\r\n        {/* Collapsible navigation links */}\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"ms-auto\">\r\n            {/* Display different navigation links based on authentication status */}\r\n            {isAuthenticated ? (\r\n              <>\r\n                <NavLink to=\"/home\" className={styles.NavLink} onClick={() => handleNavClick(\"/home\")}>\r\n                  <span className=\"material-symbols-outlined\">home</span> Home\r\n                </NavLink>\r\n                <NavLink to=\"/upload\" className={styles.NavLink} onClick={() => handleNavClick(\"/upload\")}>\r\n                  <span className=\"material-symbols-outlined\">add_photo_alternate</span> Upload\r\n                </NavLink>\r\n                <NavLink to=\"/profile\" className={styles.NavLink} onClick={() => handleNavClick(\"/profile\")}>\r\n                  <span className=\"material-symbols-outlined\">account_box</span> Profile\r\n                </NavLink>\r\n                <NavLink to=\"#\" onClick={handleLogout} className={styles.NavLink}>\r\n                  <span className=\"material-symbols-outlined\">logout</span> Logout\r\n                </NavLink>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <NavLink to=\"/login\" className={styles.NavLink} onClick={() => handleNavClick(\"/login\")}>\r\n                  <span className=\"material-symbols-outlined\">key</span> Login\r\n                </NavLink>\r\n                <NavLink to=\"/create-account\" className={styles.NavLink} onClick={() => handleNavClick(\"/create-account\")}>\r\n                  <span className=\"material-symbols-outlined\">person_add</span> Create Account\r\n                </NavLink>\r\n              </>\r\n            )}\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n  );\r\n}\r\n\r\nexport default NavigationBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}