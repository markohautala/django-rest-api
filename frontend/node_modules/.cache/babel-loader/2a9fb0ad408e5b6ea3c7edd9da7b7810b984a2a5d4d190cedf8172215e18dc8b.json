{"ast":null,"code":"import{jwtDecode}from'jwt-decode';import{axiosReq}from\"../api/axiosDefaults\";export const fetchMoreData=async(resource,setResource)=>{try{const{data}=await axiosReq.get(resource.next);setResource(prevResource=>({...prevResource,next:data.next,results:data.results.reduce((acc,cur)=>{return acc.some(accResult=>accResult.id===cur.id)?acc:[...acc,cur];},prevResource.results)}));}catch(err){}};export const followHelper=(profile,clickedProfile,following_id)=>{return profile.id===clickedProfile.id?// This is the profile I clicked on,\n// update its followers count and set its following id\n{...profile,followers_count:profile.followers_count+1,following_id}:profile.is_owner?// This is the profile of the logged in user\n// update its following count\n{...profile,following_count:profile.following_count+1}:// this is not the profile the user clicked on or the profile\n// the user owns, so just return it unchanged\nprofile;};export const unfollowHelper=(profile,clickedProfile)=>{return profile.id===clickedProfile.id?// This is the profile I clicked on,\n// update its followers count and set its following id\n{...profile,followers_count:profile.followers_count-1,following_id:null}:profile.is_owner?// This is the profile of the logged in user\n// update its following count\n{...profile,following_count:profile.following_count-1}:// this is not the profile the user clicked on or the profile\n// the user owns, so just return it unchanged\nprofile;};export const setTokenTimestamp=data=>{const refreshTokenTimestamp=jwtDecode(data===null||data===void 0?void 0:data.refresh_token).exp;localStorage.setItem(\"refreshTokenTimestamp\",refreshTokenTimestamp);};export const shouldRefreshToken=()=>{return!!localStorage.getItem(\"refreshTokenTimestamp\");};export const removeTokenTimestamp=()=>{localStorage.removeItem(\"refreshTokenTimestamp\");};","map":{"version":3,"names":["jwtDecode","axiosReq","fetchMoreData","resource","setResource","data","get","next","prevResource","results","reduce","acc","cur","some","accResult","id","err","followHelper","profile","clickedProfile","following_id","followers_count","is_owner","following_count","unfollowHelper","setTokenTimestamp","refreshTokenTimestamp","refresh_token","exp","localStorage","setItem","shouldRefreshToken","getItem","removeTokenTimestamp","removeItem"],"sources":["C:/Users/marko/Desktop/VS CODE/django-rest-api/frontend/src/utils/utils.js"],"sourcesContent":["import { jwtDecode } from 'jwt-decode';\r\nimport { axiosReq } from \"../api/axiosDefaults\";\r\n\r\nexport const fetchMoreData = async (resource, setResource) => {\r\n  try {\r\n    const { data } = await axiosReq.get(resource.next);\r\n    setResource((prevResource) => ({\r\n      ...prevResource,\r\n      next: data.next,\r\n      results: data.results.reduce((acc, cur) => {\r\n        return acc.some((accResult) => accResult.id === cur.id)\r\n          ? acc\r\n          : [...acc, cur];\r\n      }, prevResource.results),\r\n    }));\r\n  } catch (err) {}\r\n};\r\n\r\nexport const followHelper = (profile, clickedProfile, following_id) => {\r\n  return profile.id === clickedProfile.id\r\n    ? // This is the profile I clicked on,\r\n      // update its followers count and set its following id\r\n      {\r\n        ...profile,\r\n        followers_count: profile.followers_count + 1,\r\n        following_id,\r\n      }\r\n    : profile.is_owner\r\n    ? // This is the profile of the logged in user\r\n      // update its following count\r\n      { ...profile, following_count: profile.following_count + 1 }\r\n    : // this is not the profile the user clicked on or the profile\r\n      // the user owns, so just return it unchanged\r\n      profile;\r\n};\r\n\r\nexport const unfollowHelper = (profile, clickedProfile) => {\r\n  return profile.id === clickedProfile.id\r\n    ? // This is the profile I clicked on,\r\n      // update its followers count and set its following id\r\n      {\r\n        ...profile,\r\n        followers_count: profile.followers_count - 1,\r\n        following_id: null,\r\n      }\r\n    : profile.is_owner\r\n    ? // This is the profile of the logged in user\r\n      // update its following count\r\n      { ...profile, following_count: profile.following_count - 1 }\r\n    : // this is not the profile the user clicked on or the profile\r\n      // the user owns, so just return it unchanged\r\n      profile;\r\n};\r\n\r\nexport const setTokenTimestamp = (data) => {\r\n  const refreshTokenTimestamp = jwtDecode(data?.refresh_token).exp;\r\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\r\n};\r\n\r\nexport const shouldRefreshToken = () => {\r\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\r\n};\r\n\r\nexport const removeTokenTimestamp = () => {\r\n  localStorage.removeItem(\"refreshTokenTimestamp\");\r\n};\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CACtC,OAASC,QAAQ,KAAQ,sBAAsB,CAE/C,MAAO,MAAM,CAAAC,aAAa,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,WAAW,GAAK,CAC5D,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAJ,QAAQ,CAACK,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC,CAClDH,WAAW,CAAEI,YAAY,GAAM,CAC7B,GAAGA,YAAY,CACfD,IAAI,CAAEF,IAAI,CAACE,IAAI,CACfE,OAAO,CAAEJ,IAAI,CAACI,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,CAAEC,GAAG,GAAK,CACzC,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAEC,SAAS,EAAKA,SAAS,CAACC,EAAE,GAAKH,GAAG,CAACG,EAAE,CAAC,CACnDJ,GAAG,CACH,CAAC,GAAGA,GAAG,CAAEC,GAAG,CAAC,CACnB,CAAC,CAAEJ,YAAY,CAACC,OAAO,CACzB,CAAC,CAAC,CAAC,CACL,CAAE,MAAOO,GAAG,CAAE,CAAC,CACjB,CAAC,CAED,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAACC,OAAO,CAAEC,cAAc,CAAEC,YAAY,GAAK,CACrE,MAAO,CAAAF,OAAO,CAACH,EAAE,GAAKI,cAAc,CAACJ,EAAE,CACnC;AACA;AACA,CACE,GAAGG,OAAO,CACVG,eAAe,CAAEH,OAAO,CAACG,eAAe,CAAG,CAAC,CAC5CD,YACF,CAAC,CACDF,OAAO,CAACI,QAAQ,CAChB;AACA;AACA,CAAE,GAAGJ,OAAO,CAAEK,eAAe,CAAEL,OAAO,CAACK,eAAe,CAAG,CAAE,CAAC,CAC5D;AACA;AACAL,OAAO,CACb,CAAC,CAED,MAAO,MAAM,CAAAM,cAAc,CAAGA,CAACN,OAAO,CAAEC,cAAc,GAAK,CACzD,MAAO,CAAAD,OAAO,CAACH,EAAE,GAAKI,cAAc,CAACJ,EAAE,CACnC;AACA;AACA,CACE,GAAGG,OAAO,CACVG,eAAe,CAAEH,OAAO,CAACG,eAAe,CAAG,CAAC,CAC5CD,YAAY,CAAE,IAChB,CAAC,CACDF,OAAO,CAACI,QAAQ,CAChB;AACA;AACA,CAAE,GAAGJ,OAAO,CAAEK,eAAe,CAAEL,OAAO,CAACK,eAAe,CAAG,CAAE,CAAC,CAC5D;AACA;AACAL,OAAO,CACb,CAAC,CAED,MAAO,MAAM,CAAAO,iBAAiB,CAAIpB,IAAI,EAAK,CACzC,KAAM,CAAAqB,qBAAqB,CAAG1B,SAAS,CAACK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsB,aAAa,CAAC,CAACC,GAAG,CAChEC,YAAY,CAACC,OAAO,CAAC,uBAAuB,CAAEJ,qBAAqB,CAAC,CACtE,CAAC,CAED,MAAO,MAAM,CAAAK,kBAAkB,CAAGA,CAAA,GAAM,CACtC,MAAO,CAAC,CAACF,YAAY,CAACG,OAAO,CAAC,uBAAuB,CAAC,CACxD,CAAC,CAED,MAAO,MAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CACxCJ,YAAY,CAACK,UAAU,CAAC,uBAAuB,CAAC,CAClD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}